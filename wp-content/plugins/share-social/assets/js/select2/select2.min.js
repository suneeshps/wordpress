!function(t){"undefined"==typeof t.fn.each2&&t.fn.extend({each2:function(e){for(var i=t([0]),s=-1,a=this.length;++s<a&&(i.context=i[0]=this[s])&&e.call(i[0],s,i)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function i(t,e){for(var i=0,a=e.length;a>i;i+=1)if(s(t,e[i]))return i;return-1}function s(t,i){return t===i?!0:t===e||i===e?!1:null===t||null===i?!1:t.constructor===String?t+""==i+"":i.constructor===String?i+""==t+"":!1}function a(e,i){var s,a,n;if(null===e||e.length<1)return[];for(s=e.split(i),a=0,n=s.length;n>a;a+=1)s[a]=t.trim(s[a]);return s}function n(t){return t.outerWidth(!1)-t.width()}function r(i){var s="keyup-change-value";i.bind("keydown",function(){t.data(i,s)===e&&t.data(i,s,i.val())}),i.bind("keyup",function(){var a=t.data(i,s);a!==e&&i.val()!==a&&(t.removeData(i,s),i.trigger("keyup-change"))})}function o(i){i.bind("mousemove",function(i){var s=A;(s===e||s.x!==i.pageX||s.y!==i.pageY)&&t(i.target).trigger("mousemove-filtered",i)})}function h(t,i,s){s=s||e;var a;return function(){var e=arguments;window.clearTimeout(a),a=window.setTimeout(function(){i.apply(s,e)},t)}}function l(t){var e,i=!1;return function(){return i===!1&&(e=t(),i=!0),e}}function d(t,e){var s=h(t,function(t){e.trigger("scroll-debounced",t)});e.bind("scroll",function(t){i(t.target,e.get())>=0&&s(t)})}function g(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],s=t.val().length;t.focus(),t.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function p(t){t.preventDefault(),t.stopPropagation()}function c(t){t.preventDefault(),t.stopImmediatePropagation()}function u(e){if(!H){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);H=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),H.attr("class","select2-sizer"),t("body").append(H)}return H.text(e.val()),H.width()}function f(e,i,s){var a,n,r=[];a=e.attr("class"),"string"==typeof a&&t(a.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)}),a=i.attr("class"),"string"==typeof a&&t(a.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(n=s(this),"string"==typeof n&&n.length>0&&r.push(this))}),e.attr("class",r.join(" "))}function v(t,e,i,s){var a=t.toUpperCase().indexOf(e.toUpperCase()),n=e.length;return 0>a?(i.push(s(t)),void 0):(i.push(s(t.substring(0,a))),i.push("<span class='select2-match'>"),i.push(s(t.substring(a,a+n))),i.push("</span>"),i.push(s(t.substring(a+n,t.length))),void 0)}function m(e){var i,s=0,a=null,n=e.quietMillis||100,r=e.url,o=this;return function(h){window.clearTimeout(i),i=window.setTimeout(function(){s+=1;var i=s,n=e.data,l=r,d=e.transport||t.ajax,g=e.type||"GET",p={};n=n?n.call(o,h.term,h.page,h.context):null,l="function"==typeof l?l.call(o,h.term,h.page,h.context):l,null!==a&&a.abort(),e.params&&(t.isFunction(e.params)?t.extend(p,e.params.call(o)):t.extend(p,e.params)),t.extend(p,{url:l,dataType:e.dataType,data:n,type:g,cache:!1,success:function(t){if(!(s>i)){var a=e.results(t,h.page);h.callback(a)}}}),a=d.call(o,p)},n)}}function x(e){var i,s,a=e,n=function(t){return""+t.text};t.isArray(a)&&(s=a,a={results:s}),t.isFunction(a)===!1&&(s=a,a=function(){return s});var r=a();return r.text&&(n=r.text,t.isFunction(n)||(i=a.text,n=function(t){return t[i]})),function(e){var i,s=e.term,r={results:[]};return""===s?(e.callback(a()),void 0):(i=function(a,r){var o,h;if(a=a[0],a.children){o={};for(h in a)a.hasOwnProperty(h)&&(o[h]=a[h]);o.children=[],t(a.children).each2(function(t,e){i(e,o.children)}),(o.children.length||e.matcher(s,n(o),a))&&r.push(o)}else e.matcher(s,n(a),a)&&r.push(a)},t(a().results).each2(function(t,e){i(e,r.results)}),e.callback(r),void 0)}}function b(i){var s=t.isFunction(i);return function(a){var n=a.term,r={results:[]};t(s?i():i).each(function(){var t=this.text!==e,i=t?this.text:this;(""===n||a.matcher(n,i))&&r.results.push(t?this:{id:this,text:this})}),a.callback(r)}}function y(e){if(t.isFunction(e))return!0;if(!e)return!1;throw new Error("formatterName must be a function or a falsy value")}function w(e){return t.isFunction(e)?e():e}function M(e){var i=0;return t.each(e,function(t,e){e.children?i+=M(e.children):i++}),i}function C(t,i,a,n){var r,o,h,l,d,g=t,p=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return e;for(;;){for(o=-1,h=0,l=n.tokenSeparators.length;l>h&&(d=n.tokenSeparators[h],o=t.indexOf(d),!(o>=0));h++);if(0>o)break;if(r=t.substring(0,o),t=t.substring(o+d.length),r.length>0&&(r=n.createSearchChoice(r,i),r!==e&&null!==r&&n.id(r)!==e&&null!==n.id(r))){for(p=!1,h=0,l=i.length;l>h;h++)if(s(n.id(r),n.id(i[h]))){p=!0;break}p||a(r)}}return g!==t?t:void 0}function S(e,i){var s=function(){};return s.prototype=new e,s.prototype.constructor=s,s.prototype.parent=e.prototype,s.prototype=t.extend(s.prototype,i),s}if(window.Select2===e){var _,R,k,j,T,H,A,$;_={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case _.LEFT:case _.RIGHT:case _.UP:case _.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case _.SHIFT:case _.CTRL:case _.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},$=t(document),T=function(){var t=1;return function(){return t++}}(),$.bind("mousemove",function(t){A={x:t.pageX,y:t.pageY}}),R=S(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var s,a,n=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+T()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=l(function(){return i.element.closest("body")}),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(w(i.containerCss)),this.container.addClass(w(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){t(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(w(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=s=this.container.find(n),this.search=a=this.container.find("input.select2-input"),a.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),o(this.results),this.dropdown.delegate(n,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.delegate(n,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),t.fn.mousewheel&&s.mousewheel(function(t,e,i,a){var n=s.scrollTop();a>0&&0>=n-a?(s.scrollTop(0),p(t)):0>a&&s.get(0).scrollHeight-s.scrollTop()+a<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),p(t))}),r(a),a.bind("keyup-change input paste",this.bind(this.updateResults)),a.bind("focus",function(){a.addClass("select2-focused")}),a.bind("blur",function(){a.removeClass("select2-focused")}),this.dropdown.delegate(n,"mouseup",this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.bind("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(i.element.is(":disabled")||i.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var t=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(i){var n,r,o,h;if(n=i.element,"select"===n.get(0).tagName.toLowerCase()&&(this.select=r=i.element),r&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(s,a,n){var r,o=this.opts.id,h=this;r=function(s,a,l){var d,g,p,c,u,f,v,m,x,b;for(s=i.sortResults(s,a,n),d=0,g=s.length;g>d;d+=1)p=s[d],u=p.disabled===!0,c=!u&&o(p)!==e,f=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+l),v.addClass("select2-result"),v.addClass(c?"select2-result-selectable":"select2-result-unselectable"),u&&v.addClass("select2-disabled"),f&&v.addClass("select2-result-with-children"),v.addClass(h.opts.formatResultCssClass(p)),m=t(document.createElement("div")),m.addClass("select2-result-label"),b=i.formatResult(p,m,n,h.opts.escapeMarkup),b!==e&&m.html(b),v.append(m),f&&(x=t("<ul></ul>"),x.addClass("select2-result-sub"),r(p.children,x,l+1),v.append(x)),v.data("select2-data",p),a.append(v)},r(a,s,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(o=i.id,i.id=function(t){return t[o]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.attr("data-select2-tags")}if(r?(i.query=this.bind(function(i){var a,r,o,h={results:[],more:!1},l=i.term;o=function(t,e){var a;t.is("option")?i.matcher(l,t.text(),t)&&e.push({id:t.attr("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:s(t.attr("disabled"),"disabled")}):t.is("optgroup")&&(a={text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")},t.children().each2(function(t,e){o(e,a.children)}),a.children.length>0&&e.push(a))},a=n.children(),this.getPlaceholder()!==e&&a.length>0&&(r=a[0],""===t(r).text()&&(a=a.not(r))),a.each2(function(t,e){o(e,h.results)}),i.callback(h)}),i.id=function(t){return t.id},i.formatResultCssClass=function(t){return t.css}):"query"in i||("ajax"in i?(h=i.element.data("ajax-url"),h&&h.length>0&&(i.ajax.url=h),i.query=m.call(i.element,i.ajax)):"data"in i?i.query=x(i.data):"tags"in i&&(i.query=b(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(t){return{id:t,text:t}}),i.initSelection===e&&(i.initSelection=function(e,n){var r=[];t(a(e.val(),i.separator)).each(function(){var e=this,a=this,n=i.tags;t.isFunction(n)&&(n=n()),t(n).each(function(){return s(this.id,e)?(a=this.text,!1):void 0}),r.push({id:e,text:a})}),n(r)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var t,e=this.opts.element;e.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),t=this.bind(function(){var t,e;t="disabled"!==this.opts.element.attr("disabled"),e="readonly"===this.opts.element.attr("readonly"),t=t&&!e,this.enabled!==t&&(t?this.enable():this.disable()),f(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(w(this.opts.containerCssClass)),f(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(w(this.opts.dropdownCssClass))}),e.bind("propertychange.select2 DOMAttrModified.select2",t),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(e){e.forEach(t)}),this.propertyObserver.observe(e.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,s,a=this.container.offset(),n=this.container.outerHeight(!1),r=this.container.outerWidth(!1),o=this.dropdown.outerHeight(!1),h=t(window).scrollLeft()+t(window).width(),l=t(window).scrollTop()+t(window).height(),d=a.top+n,g=a.left,p=l>=d+o,c=a.top-o>=this.body().scrollTop(),u=this.dropdown.outerWidth(!1),f=h>=g+u,v=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(e=this.body().offset(),d-=e.top,g-=e.left),v?(i=!0,!c&&p&&(i=!1)):(i=!1,!p&&c&&(i=!0)),f||(g=a.left+r-u),i?(d=a.top-o,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),s=t.extend({top:d,left:g,width:r},w(this.opts.dropdownCss)),this.dropdown.css(s)},shouldOpen:function(){var e;return this.opened()?!1:(e=t.Event("opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){function e(){return{width:Math.max(document.documentElement.scrollWidth,t(window).width()),height:Math.max(document.documentElement.scrollHeight,t(window).height())}}var i,s=this.containerId,a="scroll."+s,n="resize."+s,r="orientationchange."+s;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),i=t("#select2-drop-mask"),0==i.length&&(i=t(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.bind("mousedown touchstart",function(){var e,i=t("#select2-drop");i.length>0&&(e=i.data("select2"),e.opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.css(e()),i.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var o=this;this.container.parents().add(window).each(function(){t(this).bind(n+" "+a+" "+r,function(){t("#select2-drop-mask").css(e()),o.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var e=this.containerId,i="scroll."+e,s="resize."+e,a="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).unbind(i).unbind(s).unbind(a)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(t.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return w(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var e,i,s,a,n,r,o,h=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return h.scrollTop(0),void 0;e=this.findHighlightableChoices(),s=t(e[i]),a=s.offset().top+s.outerHeight(!0),i===e.length-1&&(o=h.find("li.select2-more-results"),o.length>0&&(a=o.offset().top+o.outerHeight(!0))),n=h.offset().top+h.outerHeight(!0),a>n&&h.scrollTop(h.scrollTop()+(a-n)),r=s.offset().top-h.offset().top,0>r&&"none"!=s.css("display")&&h.scrollTop(h.scrollTop()+r)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)"),this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){s+=e;var a=t(i[s]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")&&!a.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(e){var s,a,n=this.findHighlightableChoices();return 0===arguments.length?i(n.filter(".select2-highlighted")[0],n.get()):(e>=n.length&&(e=n.length-1),0>e&&(e=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),s=t(n[e]),s.addClass("select2-highlighted"),this.ensureHighlightVisible(),a=s.data("select2-data"),a&&this.opts.element.trigger({type:"highlight",val:this.id(a),choice:a}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,i=e.find("li.select2-more-results"),s=this.resultsPage+1,a=this,n=this.search.val(),r=this.context;0!==i.length&&(t=i.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:s,context:r,matcher:this.opts.matcher,callback:this.bind(function(t){a.opened()&&(a.opts.populateResults.call(this,e,t.results,{term:n,page:s,context:r}),a.postprocessResults(t,!1,!1),t.more===!0?(i.detach().appendTo(e).text(a.opts.formatLoadMore(s+1)),window.setTimeout(function(){a.loadMoreIfNeeded()},10)):i.remove(),a.positionDropdown(),a.resultsPage=s,a.context=t.context)})})))},tokenize:function(){},updateResults:function(i){function a(){l.scrollTop(0),h.removeClass("select2-active"),g.positionDropdown()}function n(t){l.html(t),a()}var r,o,h=this.search,l=this.results,d=this.opts,g=this;if(i===!0||this.showSearchInput!==!1&&this.opened()){h.addClass("select2-active");var p=this.getMaximumSelectionSize();if(p>=1&&(r=this.data(),t.isArray(r)&&r.length>=p&&y(d.formatSelectionTooBig,"formatSelectionTooBig")))return n("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(p)+"</li>"),void 0;if(h.val().length<d.minimumInputLength)return y(d.formatInputTooShort,"formatInputTooShort")?n("<li class='select2-no-results'>"+d.formatInputTooShort(h.val(),d.minimumInputLength)+"</li>"):n(""),void 0;if(d.formatSearching()&&i===!0&&n("<li class='select2-searching'>"+d.formatSearching()+"</li>"),d.maximumInputLength&&h.val().length>d.maximumInputLength)return y(d.formatInputTooLong,"formatInputTooLong")?n("<li class='select2-no-results'>"+d.formatInputTooLong(h.val(),d.maximumInputLength)+"</li>"):n(""),void 0;o=this.tokenize(),o!=e&&null!=o&&h.val(o),this.resultsPage=1,d.query({element:d.element,term:h.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(r){var o;if(this.opened()){if(this.context=r.context===e?null:r.context,this.opts.createSearchChoice&&""!==h.val()&&(o=this.opts.createSearchChoice.call(null,h.val(),r.results),o!==e&&null!==o&&g.id(o)!==e&&null!==g.id(o)&&0===t(r.results).filter(function(){return s(g.id(this),g.id(o))}).length&&r.results.unshift(o)),0===r.results.length&&y(d.formatNoMatches,"formatNoMatches"))return n("<li class='select2-no-results'>"+d.formatNoMatches(h.val())+"</li>"),void 0;l.empty(),g.opts.populateResults.call(this,l,r.results,{term:h.val(),page:this.resultsPage,context:null}),r.more===!0&&y(d.formatLoadMore,"formatLoadMore")&&(l.append("<li class='select2-more-results'>"+g.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){g.loadMoreIfNeeded()},10)),this.postprocessResults(r,i),a()}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){g(this.search)},selectHighlighted:function(t){var e=this.highlight(),i=this.results.find(".select2-highlighted"),s=i.closest(".select2-result").data("select2-data");s&&(this.highlight(e),this.onSelect(s,t))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function i(){var i,s,a,n,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==e)for(s=i.split(";"),n=0,r=s.length;r>n;n+=1)if(a=s[n].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==a&&a.length>=1)return a[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var s=i.call(this);null!==s&&this.container.css("width",s)}}),k=S(R,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(t.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),g(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,e=this.container,i=this.dropdown,s=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=t=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===_.PAGE_UP||t.which===_.PAGE_DOWN)return p(t),void 0;switch(t.which){case _.UP:case _.DOWN:return this.moveHighlight(t.which===_.UP?-1:1),p(t),void 0;case _.TAB:case _.ENTER:return this.selectHighlighted(),p(t),void 0;case _.ESC:return this.cancel(t),p(t),void 0}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(t){return!this.enabled||t.which===_.TAB||_.isControl(t)||_.isFunctionKey(t)||t.which===_.ESC?void 0:this.opts.openOnEnter===!1&&t.which===_.ENTER?(p(t),void 0):t.which==_.DOWN||t.which==_.UP||t.which==_.ENTER&&this.opts.openOnEnter?(this.open(),p(t),void 0):t.which==_.DELETE||t.which==_.BACKSPACE?(this.opts.allowClear&&this.clear(),p(t),void 0):void 0})),r(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(t){this.opened()||(this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(""),p(t))})),t.delegate("abbr","mousedown",this.bind(function(t){this.enabled&&(this.clear(),c(t),this.close(),this.selection.focus())})),t.bind("mousedown",this.bind(function(t){s=!0,this.opened()?this.close():this.enabled&&this.open(),p(t),s=!1})),i.bind("mousedown",this.bind(function(){this.search.focus()})),t.bind("focus",this.bind(function(t){p(t)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(t){var e=this.selection.data("select2-data");e&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(e,i){var s=e.find(":selected");t.isFunction(i)&&i({id:s.attr("value"),text:s.text(),element:s})}:"data"in e&&(e.initSelection=e.initSelection||function(i,a){var n=i.val(),r=null;e.query({matcher:function(t,i,a){var o=s(n,e.id(a));return o&&(r=a),o},callback:t.isFunction(a)?function(){a(r)}:t.noop})}),e},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(t,e,i){var a=0,n=this,r=!0;if(this.findHighlightableChoices().each2(function(t,e){return s(n.id(e.data("select2-data")),n.opts.element.val())?(a=t,!1):void 0}),i!==!1&&this.highlight(a),e===!0){var o=this.opts.minimumResultsForSearch;r=0>o?!1:M(t.results)>=o,this.showSearch(r)}},showSearch:function(e){this.showSearchInput=e,this.dropdown.find(".select2-search")[e?"removeClass":"addClass"]("select2-search-hidden"),t(this.dropdown,this.container)[e?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(t,e){var i=this.opts.element.val();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.close(),e&&e.noFocus||this.selection.focus(),s(i,this.id(t))||this.triggerChange()},updateSelection:function(t){var i,s=this.selection.find("span");this.selection.data("select2-data",t),s.empty(),i=this.opts.formatSelection(t,s),i!==e&&s.append(this.opts.escapeMarkup(i)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.selection.find("abbr").show()},val:function(){var t,i=!1,s=null,a=this;if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find(":selected").each2(function(t,e){return s={id:e.attr("value"),text:e.text(),element:e.get(0)},!1}),this.updateSelection(s),this.setPlaceholder(),i&&this.triggerChange();else{if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");if(!t&&0!==t)return this.clear(i),i&&this.triggerChange(),void 0;this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){a.opts.element.val(t?a.id(t):""),a.updateSelection(t),a.setPlaceholder(),i&&a.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):(t&&""!==t?(this.opts.element.val(t?this.id(t):""),this.updateSelection(t)):this.clear(),void 0)}}),j=S(R,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var i=[];t.find(":selected").each2(function(t,e){i.push({id:e.attr("value"),text:e.text(),element:e[0]})}),e(i)}:"data"in e&&(e.initSelection=e.initSelection||function(i,n){var r=a(i.val(),e.separator),o=[];e.query({matcher:function(i,a,n){var h=t.grep(r,function(t){return s(t,e.id(n))}).length;return h&&o.push(n),h},callback:t.isFunction(n)?function(){n(o)}:t.noop})}),e},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===_.BACKSPACE&&""===this.search.val()){this.close();var i,s=e.find(".select2-search-choice-focus");if(s.length>0)return this.unselect(s.first()),this.search.width(10),p(t),void 0;i=e.find(".select2-search-choice:not(.select2-locked)"),i.length>0&&i.last().addClass("select2-search-choice-focus")}else e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(t.which){case _.UP:case _.DOWN:return this.moveHighlight(t.which===_.UP?-1:1),p(t),void 0;case _.ENTER:case _.TAB:return this.selectHighlighted(),p(t),void 0;case _.ESC:return this.cancel(t),p(t),void 0}if(t.which!==_.TAB&&!_.isControl(t)&&!_.isFunctionKey(t)&&t.which!==_.BACKSPACE&&t.which!==_.ESC){if(t.which===_.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===_.PAGE_UP||t.which===_.PAGE_DOWN)&&p(t)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),t.stopImmediatePropagation()})),this.container.delegate(i,"mousedown",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.delegate(i,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))
},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch(),this.opts.element.trigger(t.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus(),this.opts.element.triggerHandler("focus")},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var s=[],a=[],n=this;t(e).each(function(){i(n.id(this),s)<0&&(s.push(n.id(this)),a.push(this))}),e=a,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){n.addSelectedChoice(this)}),n.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var s,a=!i.locked,n=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),o=a?n:r,h=this.id(i),l=this.getVal();s=this.opts.formatSelection(i,o.find("div")),s!=e&&o.find("div").replaceWith("<div>"+this.opts.escapeMarkup(s)+"</div>"),a&&o.find(".select2-search-choice-close").bind("mousedown",p).bind("click dblclick",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),p(e))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),o.data("select2-data",i),o.insertBefore(this.searchContainer),l.push(h),this.setVal(l)},unselect:function(t){var e,s,a=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";e=t.data("select2-data"),e&&(s=i(this.id(e),a),s>=0&&(a.splice(s,1),this.setVal(a),this.select&&this.postprocessResults()),t.remove(),this.opts.element.trigger({type:"removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}))},postprocessResults:function(){var t=this.getVal(),e=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),a=this;e.each2(function(e,s){var n=a.id(s.data("select2-data"));i(n,t)>=0&&(s.addClass("select2-selected"),s.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&a.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-n(this.search)},resizeSearch:function(){var t,e,i,s,a,r=n(this.search);t=u(this.search)+10,e=this.search.offset().left,i=this.selection.width(),s=this.selection.offset().left,a=i-(e-s)-r,t>a&&(a=i-r),40>a&&(a=i-r),0>=a&&(a=t),this.search.width(a)},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),a(t,this.opts.separator))},setVal:function(e){var s;this.select?this.select.val(e):(s=[],t(e).each(function(){i(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)))},val:function(){var i,s=!1,a=this;if(0===arguments.length)return this.getVal();if(i=arguments[0],arguments.length>1&&(s=arguments[1]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),s&&this.triggerChange(),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange();else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t(e).map(a.id);a.setVal(i),a.updateSelection(e),a.clearSearch(),s&&a.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e){var i,s=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(e||(e=[]),i=t.map(e,function(t){return s.opts.id(t)}),this.setVal(i),this.updateSelection(e),this.clearSearch(),void 0)}}),t.fn.select2=function(){var s,a,n,r,o=Array.prototype.slice.call(arguments,0),h=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===o.length||"object"==typeof o[0])s=0===o.length?{}:t.extend({},o[0]),s.element=t(this),"select"===s.element.get(0).tagName.toLowerCase()?r=s.element.attr("multiple"):(r=s.multiple||!1,"tags"in s&&(s.multiple=r=!0)),a=r?new j:new k,a.init(s);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(i(o[0],h)<0)throw"Unknown method: "+o[0];if(n=e,a=t(this).data("select2"),a===e)return;if(n="container"===o[0]?a.container:a[o[0]].apply(a,o.slice(1)),n!==e)return!1}}),n===e?this:n},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,s){var a=[];return v(t.text,i.term,a,s),a.join("")},formatSelection:function(t){return t?t.text:e},sortResults:function(t){return t},formatResultCssClass:function(){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please enter "+i+" less character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return e.toUpperCase().indexOf(t.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:C,escapeMarkup:function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(t).replace(/[&<>"'/\\]/g,function(t){return e[t[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:m,local:x,tags:b},util:{debounce:h,markMatch:v},"class":{"abstract":R,single:k,multi:j}}}}(jQuery);